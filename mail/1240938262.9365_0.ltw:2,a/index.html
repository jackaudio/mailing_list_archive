<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [LAD] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?)</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [LAD] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?)</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1240922797.19703_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1240940617.13659_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1240938262.9365_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Tue, 28 Apr 2009 18:02:08 +0100 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> Steve Harris </span> &lt;[hidden] at plugin dot org dot uk&gt; </td></tr>
<tr><td class='col1'>To</td><td>"Kjetil S. Matheussen" &lt;[hidden] at notam02 dot no&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>[hidden] at lists dot jackaudio dot org, [hidden] at lists dot linuxaudio dot org </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>Kjetil S. Matheussen
<a href='../1240922797.19703_0.ltw:2,a/index.html'>[LAD] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?) </a></td></tr>
<tr><td class='col1'>Follow-Up</td><td>Kjetil S. Matheussen
<a href='../1240940617.13659_0.ltw:2,a/index.html'>Re: [LAD] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?) </a></td></tr>
</table>
<pre>
I don't know about jitter, but certainly a few years ago, you  
sometimes got stalls - eg. under heavy DMA load. That may not be an  
issue with modern CPUs and chipsets. I think I posted some code that  
demonstrated it to the l-a-d list at the time, but good luck finding  
it :)

The TSC is only required to be monotonic, so you wont get any  
guarantees, just practical knowledge of whether you can get away with  
it or not.

- Steve

On 28 Apr 2009, at 13:46, Kjetil S. Matheussen wrote:

&gt;
&gt; I'm doing some benchmarking where I need about 0.1ms accuracy.
&gt; I'm using an intel dual core 2 computer. This is for a paper,
&gt; so I just need the numbers, and the code is not going to run
&gt; on any other computer.
&gt;
&gt; I've looked at the HPET code in jack, but am unsure how accurate it  
&gt; is,
&gt; and whether there are any overhead using it?
&gt;
&gt; And I have also tried using tsc[1]. tsc seems to work perfectly,
&gt; but I don't know how accurate it is on intel dual core machines?
&gt;
&gt; Testing the accuracy of tsc by bounding my thread to one processor
&gt; using sched_setaffinity and using usleep(), and comparing
&gt; with code which is forced to switch to read the tsc value from the
&gt; other CPU, shows that the accuracy of tsc when reading and writing
&gt; using two different CPUs is below 1ms since
&gt; that's the accuracy of usleep(). So it looks promising, but
&gt; I need at least 0.1ms accuracy...
&gt;
&gt; Anyone know how much jitter there might be for tsc?
&gt; I've not found anything on google yet.
&gt;
&gt;
&gt;
&gt; [1]  __asm__ __volatile__("rdtsc" : "=A" (ret))
&gt;
&gt; 
&gt; Linux-audio-dev mailing list
&gt; [hidden]
&gt; http://lists.linuxaudio.org/mailman/listinfo/linux-audio-dev
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1240922797.19703_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1240940617.13659_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1240938262.9365_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1240938262.9365_0.ltw:2,a&nbsp;&lt;C9851EAB-7F06-46FF-83BD-9DCE69928017 at plugin dot org dot uk&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
