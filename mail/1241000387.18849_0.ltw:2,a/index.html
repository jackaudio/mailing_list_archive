<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [LAD] [Jack-Devel] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?)</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [LAD] [Jack-Devel] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?)</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1240950376.31114_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1241058394.19042_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1241000387.18849_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Wed, 29 Apr 2009 12:19:20 +0200 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> Kjetil S. Matheussen </span> &lt;[hidden] at notam02 dot no&gt; </td></tr>
<tr><td class='col1'>To</td><td>Jussi Laako &lt;[hidden] at sonarnerd dot net&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>[hidden] at lists dot jackaudio dot org, [hidden] at lists dot linuxaudio dot org, "Kjetil S. Matheussen" &lt;[hidden] at notam02 dot no&gt; </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>Jussi Laako
<a href='../1240949409.29323_0.ltw:2,a/index.html'>Re: [LAD] [Jack-Devel] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?) </a></td></tr>
<tr><td class='col1'>Follow-Up</td><td>Lee Revell
<a href='../1241058394.19042_0.ltw:2,a/index.html'>Re: [LAD] [Jack-Devel] How is the TSC calibration accuracy on dual core 2 computers? (And what about HPET?) </a></td></tr>
</table>
<pre>
On Tue, 28 Apr 2009, Jussi Laako wrote:

&gt; Kjetil S. Matheussen wrote:
&gt;&gt;
&gt;&gt; I've looked at the HPET code in jack, but am unsure how accurate it is,
&gt;&gt; and whether there are any overhead using it?
&gt;
&gt; Resolution on my machine is 1 / 14.318180 MHz. Frequency can vary
&gt; typically from 12 to 16 MHz. Access is usually rather fast through MMIO.
&gt; Accuracy can vary depending on hardware and environment, same applies
&gt; even more for TSC.
&gt;

Thanks! I'll look closer at the jack code.


&gt;&gt; that's the accuracy of usleep(). So it looks promising, but
&gt;&gt; I need at least 0.1ms accuracy...
&gt;
&gt; In my opinion, clock_gettime() with CLOCK_MONOTONIC is pretty good if
&gt; kernel is using reasonably good clock source. You can check the current
&gt; one by "cat
&gt; /sys/devices/system/clocksource/clocksource0/current_clocksource". Over
&gt; rather long periods, CLOCK_REALTIME with good NTP sync would probably be
&gt; a good choice.
&gt;

It shows hpet.


&gt; Over what time span you would need that 0.1 ms accuracy?
&gt;

Hard to say. This is for testing a couple of garbage collectors, and the
difference between worst case and best case can be quite high.
Worst-case is probably around 1ms, and best case maybe around 0.1ms.
It also depends on buffer settings, so I can use higher buffers
to get higher timings.

But calls to clock_gettime()/HPET/etc. will only happen maximum 6 times
per audio block, so clock_gettime()/HPET/etc. doesn't have to be extremely
efficient.
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1240950376.31114_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1241058394.19042_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1241000387.18849_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1241000387.18849_0.ltw:2,a&nbsp;&lt;Pine.LNX.4.64-L.0904291210050.17849 at leia dot ifi dot uio dot no&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
