<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [LAD] Atomic Operations</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [LAD] Atomic Operations</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1260906179.10166_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1260956688.26220_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1260922312.1710_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Tue, 15 Dec 2009 16:11:08 -0800 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> Sean Bolton </span> &lt;[hidden] at jps dot net&gt; </td></tr>
<tr><td class='col1'>To</td><td>LAD list &lt;[hidden] at lists dot linuxaudio dot org&gt; </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>Olivier Guilyardi
<a href='../1260906179.10166_0.ltw:2,a/index.html'>Re: [LAD] Atomic Operations </a></td></tr>
<tr><td class='col1'>Follow-Up</td><td>Tim Blechmann
<a href='../1260956688.26220_0.ltw:2,a/index.html'>Re: [LAD] Atomic Operations </a></td></tr>
</table>
<pre>
Yikes, not this again....

On Dec 15, 2009, at 11:42 AM, Olivier Guilyardi wrote:
&gt; On 12/15/2009 08:04 PM, Paul Davis wrote:
&gt;&gt; this was discussed at some considerable length on jack-devel last  
&gt;&gt; year, IIRC.
&gt;&gt; for single reader/single writer ringbuffers, i believe that we
&gt;&gt; concluded that memory barriers are not necessary.
&gt;
&gt; No, to me the conclusion was: we can't programmatically prove that  
&gt; memory
&gt; barriers are needed (even on the most vulnerable architectures),  
&gt; but the theory
&gt; say that they are, and they should be added for correctness.

My understanding matches Olivier's.  Intel processors have strong memory
ordering, and so on them the jack ringbuffer is safe without memory
barriers. However, some PPC processors, and SPARC V9s under linux  
(but not
Solaris), use weak memory ordering, and on them, the jack ringbuffer  
code
can theoretically fail.

See the "ring buffer memory barriers" discussion on jack-devel back in
October of last year for more information; in particular, this article
by Paul E. McKenney is very helpful:

http://www.linuxjournal.com/article/8211

And, until the jack ringbuffer gets fixed, the PortAudio ringbuffer
appears safe for use on multiprocessor weakly-ordered systems.

-Sean
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1260906179.10166_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1260956688.26220_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1260922312.1710_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1260922312.1710_0.ltw:2,a&nbsp;&lt;EF5C4280-CE61-4FA7-94B6-893F1AFD4FDE at jps dot net&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
