<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [Jack-Devel] buffer size callback, revisit</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [Jack-Devel] buffer size callback, revisit</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1297794426.31518_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1297797964.6362_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1297797796.5908_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Tue, 15 Feb 2011 13:22:41 -0600 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> Jack O'Quin </span> &lt;[hidden] at gmail dot com&gt; </td></tr>
<tr><td class='col1'>To</td><td>Paul Davis &lt;[hidden] at linuxaudiosystems dot com&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>JACK &lt;[hidden] at lists dot jackaudio dot org&gt; </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>Paul Davis
<a href='../1297794381.31427_0.ltw:2,a/index.html'>Re: [Jack-Devel] buffer size callback, revisit </a></td></tr>
<tr><td class='col1'>Follow-Up</td><td>Paul Davis
<a href='../1297797964.6362_0.ltw:2,a/index.html'>Re: [Jack-Devel] buffer size callback, revisit </a></td></tr>
</table>
<pre>
On Tue, Feb 15, 2011 at 12:26 PM, Paul Davis &lt;[hidden]&gt; wrote:
&gt; On Tue, Feb 15, 2011 at 1:21 PM, Jack O'Quin &lt;[hidden]&gt; wrote:
&gt;&gt; On Tue, Feb 15, 2011 at 12:13 PM, Paul Davis &lt;[hidden]&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; you have a client. it registers a buffer size callback. it relies on
&gt;&gt;&gt; it to get the current buffer size.
&gt;&gt;
&gt;&gt; Ah. I was assuming it had to initialize things, first.
&gt;&gt;
&gt;&gt; Clearly not an elegant interface, but that's what it requires, right?
&gt;
&gt; its the initialization that leads to the race condition. you cannot
&gt; ensure that the buffer size didn't change between you determining it
&gt; and your first process() callback.

Hence, the callback needs to reallocate.

That is why I asked: shouldn't JACK invoke the callback before the
first process call? What breaks if it does?

&gt;&gt; You'd have to code it to work correctly either way. I'm still not
&gt;&gt; quite sure why that's not possible.
&gt;
&gt; you don't know if the jackd implementation you are talking to is going
&gt; to call your bufsize callback during jack_activate(). it might, it
&gt; might not. what possible strategies can you follow?

The best the client can do is code it to work if JACK works correctly.

If JACK does not, the best hope is not to change the buffer size.
That's been the de facto solution for the past ten years or so. I
doubt very many JACK clients ever worked correctly with this
interface.
-- 
&#xA0;joq
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1297794426.31518_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1297797964.6362_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1297797796.5908_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1297797796.5908_0.ltw:2,a&nbsp;&lt;AANLkTikdo1beQnE374WQQ_EGHT7sn5dh+0o+_4_UUBWn at mail dot gmail dot com&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
