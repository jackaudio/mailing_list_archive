<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [Jack-Devel] Proposal: JACK MIDI API extension for system exclusive messages</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [Jack-Devel] Proposal: JACK MIDI API extension for system exclusive messages</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1301644819.27203_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1301659924.17949_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1301650740.6892_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Fri, 01 Apr 2011 11:38:33 +0200 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> torbenh </span> &lt;[hidden] at gmx dot de&gt; </td></tr>
<tr><td class='col1'>To</td><td>St&#xE9;phane Letz &lt;[hidden] at grame dot fr&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>Jack devel &lt;[hidden] at lists dot jackaudio dot org&gt; </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>St&#xE9;phane Letz
<a href='../1301644819.27203_0.ltw:2,a/index.html'>Re: [Jack-Devel] Proposal: JACK MIDI API extension for system exclusive messages </a></td></tr>
<tr><td class='col1'>Follow-Up</td><td>Devin Anderson
<a href='../1301676342.4507_0.ltw:2,a/index.html'>Re: [Jack-Devel] Proposal: JACK MIDI API extension for system exclusive messages </a></td></tr>
</table>
<pre>
On Fri, Apr 01, 2011 at 10:00:04AM +0200, St&#xE9;phane Letz wrote:
&gt; 
&gt; Le 1 avr. 2011 &#xE0; 09:34, Devin Anderson a &#xE9;crit :
&gt; 
&gt; &gt; On Thu, Mar 31, 2011 at 1:13 AM, Devin Anderson
&gt; &gt; &lt;[hidden]&gt; wrote:
&gt; &gt; 
&gt; &gt;&gt;    typedef struct _jack_midi_event {
&gt; &gt;&gt;        jack_nframes_t time;
&gt; &gt;&gt;        size_t size;
&gt; &gt;&gt;        union {
&gt; &gt;&gt;            jack_midi_data_t *buffer;
&gt; &gt;&gt;            const jack_midi_stream_t *stream;
&gt; &gt;&gt;        };
&gt; &gt;&gt;    } jack_midi_event_t;
&gt; &gt; 
&gt; &gt; I forgot to mention that while my message in August suggested the
&gt; &gt; above, the proposal I'm making would actually have the definition of
&gt; &gt; 'jack_midi_event_t' changed to:
&gt; &gt; 
&gt; &gt; typedef struct _jack_midi_event {
&gt; &gt;    jack_nframes_t time;
&gt; &gt;    size_t size;
&gt; &gt;    union {
&gt; &gt;        jack_midi_data_t *buffer;
&gt; &gt;        const jack_midi_blob_t *blob;
&gt; &gt;    };
&gt; &gt; } jack_midi_event_t;
&gt; &gt; 
&gt; &gt; ... where it's still the case that (size == 0) to indicate that the
&gt; &gt; event contains a blob object.
&gt; &gt; 
&gt; &gt; Just clarifying in case that confused anyone.
&gt; &gt; 
&gt; &gt; -- 
&gt; &gt; Devin Anderson
&gt; &gt; devin (at) charityfinders (dot) com
&gt; 
&gt; I guess I would help to understand the new API if you provide some "pseudo" example of a JACK client using it.

i am not sure if we should do this implicit memory management.
maybe allocating a blob, and then putting the blob id into the midi
event would be smarter.

we still need to manage references to blobs.
and we need an RT safe memory management in shm.
(which probably needs to be threadsafe too.... tricky :)


-- 
torben Hohn
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1301644819.27203_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1301659924.17949_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1301650740.6892_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1301650740.6892_0.ltw:2,a&nbsp;&lt;20110401093833.GC4664 at siel dot b&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
