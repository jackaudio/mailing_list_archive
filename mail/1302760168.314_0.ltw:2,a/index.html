<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [Jack-Devel] is this latency coming from ALSA, jack, or ardour?</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [Jack-Devel] is this latency coming from ALSA, jack, or ardour?</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1302753506.17346_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1302764003.9226_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1302760168.314_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Thu, 14 Apr 2011 07:49:00 +0200 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> St&#xE9;phane Letz </span> &lt;[hidden] at grame dot fr&gt; </td></tr>
<tr><td class='col1'>To</td><td>[hidden] at chriscaudle dot org </td></tr>
<tr><td class='col1'>Cc</td><td>[hidden] at lists dot jackaudio dot org </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>Chris Caudle
<a href='../1302753506.17346_0.ltw:2,a/index.html'>Re: [Jack-Devel] is this latency coming from ALSA, jack, or ardour? </a></td></tr>
</table>
<pre>
Le 14 avr. 2011 &#xE0; 05:57, Chris Caudle a &#xE9;crit :

&gt; On Wed, April 13, 2011 1:03 pm, Chris Caudle wrote:
&gt;&gt; My hunch at the moment is ALSA, but that is why I
&gt;&gt; am experimenting, to determine that empirically.
&gt; 
&gt; I think I have confirmed that the latency reported by ALSA to JACK is the
&gt; problem, but I would be interested to hear if anyone spots something I've
&gt; overlooked.
&gt; 
&gt; So my previous session bouncing from track to track analog out back to
&gt; analog in with my USB interface ended up with each track offset from the
&gt; previous by about 13ms.
&gt; 
&gt; Using my PCI Envy24 based card (M-Audio Audiophile2496) each track was
&gt; offset from the previous by some small fraction of a ms.  The total offset
&gt; from track 1 to track 10 was in the range of 0.5ms to 0.7ms.  Using a
&gt; recording of the click track, I could just hear slight doubling between
&gt; any pair of tracks.  On any more realistic scenario (i.e. not comparing
&gt; identical tracks to each other) I think it would probably be so close it
&gt; wouldn't matter, there would be more variation in a player's rhythm than
&gt; the offset, so you shouldn't be able to tell.
&gt; 
&gt; I think what that says is that the M-Audio PCI card is reporting a latency
&gt; figure back to JACK that is within some fraction of a millisecond to being
&gt; exact, and the USB interface is reporting back some bogus number that is
&gt; off by over 10ms.  That, or there is some additional latency in the USB
&gt; stack that the interface can't know about, and ALSA is not compensating
&gt; correctly and adjusting the number when it passes the information to JACK.
&gt; I don't know how JACK gets the latency information for the analog
&gt; interfaces, so I'm not sure where the inaccuracy could come in for the USB
&gt; interface.  I think the short of it is I won't be using my USB interface
&gt; to overdub percussion, unless I'm prepared to do some manual shifting to
&gt; get everything lined back up.
&gt; 
&gt; It also brings up a question of digital interfaces.  If I use the digital
&gt; out from the card with external ADC and DAC, that is additional latency
&gt; that the card has no way to know about. Is there anyway to tell JACK (or
&gt; Ardour) about the additional latency so that it can be automatically
&gt; compensated like it is when the analog interfaces of the card are used?
&gt; 
&gt; -- 
&gt; Chris Caudle
&gt; 
&gt; 

With a running JACK server, can you try: 

jack_lsp -A -l

and report what is printed?

Thanks.

St&#xE9;phane 
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1302753506.17346_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1302764003.9226_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1302760168.314_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1302760168.314_0.ltw:2,a&nbsp;&lt;1F99B6B7-F32C-449A-A9B3-551F14CEEAE8 at grame dot fr&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
