<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [Jack-Devel] CoreMIDI driver bug fix</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [Jack-Devel] CoreMIDI driver bug fix</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1362238949.13108_0.ltw:2,/index.html'>Prev</a></td><td><a href='../1362252599.22469_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1362250032.20173_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Sat, 02 Mar 2013 10:47:05 -0800 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> Devin Anderson </span> &lt;[hidden] at gmail dot com&gt; </td></tr>
<tr><td class='col1'>To</td><td>St&#xE9;phane Letz &lt;[hidden] at grame dot fr&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>jack-devel List &lt;[hidden] at lists dot jackaudio dot org&gt;, Christian Schoenebeck &lt;[hidden] at crudebyte dot com&gt; </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>St&#xE9;phane Letz
<a href='../1362238949.13108_0.ltw:2,/index.html'>[Jack-Devel] CoreMIDI driver bug fix </a></td></tr>
</table>
<pre>
On Sat, Mar 2, 2013 at 7:42 AM, St&#xE9;phane Letz &lt;[hidden]&gt; wrote:

&gt; Christian fixed a bug in CoreMIDI driver:
&gt;
&gt; https://github.com/jackaudio/jack2/commit/4e5e7a11c3422134e8f63689e0515e0f71d894e7
&gt;
&gt; CoreMIDI driver fix: MIDI "running status" was not implemented.
&gt; ( Added few lines to implement it, transition to
&gt;   JackMidiRawInputWriteQueue might be a better solution though )

The CoreMIDI spec seems to disallow running status.  The description
of the MIDIPacket struct:

    https://developer.apple.com/library/mac/documentation/MusicAudio/Reference/CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tag/MIDIPacket

... and the function MIDIPacketListAdd:

    https://developer.apple.com/library/mac/documentation/MusicAudio/Reference/CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/func/MIDIPacketListAdd

... both say, "Running status is not [allowed|permitted]".  Is there a
case where running status is being used?

However, something that I didn't notice before (was it there when I
implemented the CoreMIDI driver?) is that a MIDIPacket can contain
multiple MIDI messages.  I don't remember accounting for that when I
wrote the driver.  That's a bug that will need to be fixed.

-- 
Devin Anderson
surfacepatterns (at) gmail (dot) com

blog - http://surfacepatterns.blogspot.com/
midisnoop - http://midisnoop.googlecode.com/
psinsights - http://psinsights.googlecode.com/
synthclone - http://synthclone.googlecode.com/
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1362238949.13108_0.ltw:2,/index.html'>Prev</a></td><td><a href='../1362252599.22469_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1362250032.20173_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1362250032.20173_0.ltw:2,a&nbsp;&lt;CAG7zqTpWKMYxsuU8npOZWhtrVj1msGsHRe=8jLDbNvCnrU_RhA at mail dot gmail dot com&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
