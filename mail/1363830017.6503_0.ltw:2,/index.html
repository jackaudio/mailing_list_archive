<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [Jack-Devel] Jack2 waf build error</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [Jack-Devel] Jack2 waf build error</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1363811042.22025_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1363854085.4521_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1363830017.6503_0.ltw:2,'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Thu, 21 Mar 2013 03:39:56 +0200 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> Nedko Arnaudov </span> &lt;[hidden] at arnaudov dot name&gt; </td></tr>
<tr><td class='col1'>To</td><td>Alexey Chernov &lt;[hidden] at gmail dot com&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>[hidden] at lists dot jackaudio dot org </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>Alexey Chernov
<a href='../1363382743.15907_0.ltw:2,a/index.html'>[Jack-Devel] Jack2 waf build error </a></td></tr>
<tr><td class='col1'>Follow-Up</td><td>4ernov
<a href='../1363854085.4521_0.ltw:2,a/index.html'>Re: [Jack-Devel] Jack2 waf build error </a></td></tr>
<tr><td class='col1'>Follow-Up</td><td>Adrian Knoth
<a href='../1363864663.12109_0.ltw:2,a/index.html'>Re: [Jack-Devel] Jack2 waf build error </a></td></tr>
</table>
<pre>
Alexey Chernov &lt;[hidden]&gt; writes:

&gt; Hello,
&gt; I decided to update my Jack2 version and faced a strange error when building 
&gt; version 1.9.9.5 (also there with latest git master):
&gt;
&gt; ./waf build
&gt; Waf: Entering directory `/usr/src/packages/jack/jack2/build'
&gt; make[1]: Entering directory `/usr/src/packages/jack/jack2/build'
&gt; Traceback (most recent call last):
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py", 
&gt; line 97, in waf_entry_point
&gt;     run_commands()
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py", 
&gt; line 151, in run_commands
&gt;     run_command(cmd_name)
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py", 
&gt; line 143, in run_command
&gt;     ctx.execute()
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py", 
&gt; line 345, in execute
&gt;     return execute_method(self)
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Build.py", 
&gt; line 98, in execute
&gt;     self.execute_build()
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Build.py", 
&gt; line 101, in execute_build
&gt;     self.recurse([self.run_dir])
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Context.py", 
&gt; line 128, in recurse
&gt;     user_function(self)
&gt;   File "/usr/src/packages/jack/jack2/wscript", line 337, in build
&gt;     bld.add_subdirs('common')
&gt;   File 
&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Context.py", 
&gt; line 128, in recurse
&gt;     user_function(self)
&gt;   File "/usr/src/packages/jack/jack2/common/wscript", line 277, in build
&gt;     create_jack_process_obj(bld, 'netmanager', 'JackNetManager.cpp', 
&gt; serverlib)
&gt;   File "/usr/src/packages/jack/jack2/common/wscript", line 27, in 
&gt; create_jack_process_obj
&gt;     process.includes = ['.'] + env_includes + ['jack', '..']
&gt; UnboundLocalError: local variable 'env_includes' referenced before assignment
&gt;
&gt; Here's my configure command and its output:
&gt; ./waf configure --prefix=/usr --firewire --alsa --debug
&gt; Setting top to                           : /usr/src/packages/jack/jack2 
&gt; Setting out to                           : /usr/src/packages/jack/jack2/build 
&gt; Checking for 'g++' (c++ compiler)        : /usr/bin/g++ 
&gt; Checking for 'gcc' (c compiler)          : /usr/bin/gcc 
&gt; Checking for header samplerate.h         : yes 
&gt; Checking for header samplerate.h         : yes 
&gt; Checking for header sndfile.h            : yes 
&gt; Checking for program pkg-config          : /usr/bin/pkg-config 
&gt; Checking for 'celt' &gt;= 0.5.0             : yes 
&gt; Checking for library readline            : yes 
&gt; Checking for 'celt' &gt;= 0.11.0            : yes 
&gt; Checking for 'opus' &gt;= 0.9.0             : not found 
&gt;
&gt; ==================                      
&gt; JACK 1.9.10 svn revision will checked and eventually updated during build
&gt; Build with a maximum of 64 JACK clients
&gt; Build with a maximum of 768 ports per application
&gt; Install prefix                           :  /usr 
&gt; Library directory                        :  /usr/lib 
&gt; Drivers directory                        :  /usr/lib/jack 
&gt; Build debuggable binaries                :  yes 
&gt; C compiler flags                         :  ['-O3', '-march=core2', '-mssse3', 
&gt; '-Wall', '-g'] 
&gt; C++ compiler flags                       :  ['-O3', '-march=core2', '-mssse3', 
&gt; '-Wall', '-g'] 
&gt; Linker flags                             :  ['-g'] 
&gt; Build doxygen documentation              :  no 
&gt; Build Opus netjack2                      :  no 
&gt; Build with engine profiling              :  no 
&gt; Build with 32/64 bits mixed mode         :  no 
&gt; Build standard JACK (jackd)              :  yes 
&gt; Build D-Bus JACK (jackdbus)              :  no 
&gt; Autostart method                         :  classic
&gt;
&gt; Python version is 2.7.2. Could you please help me with the issue?

Do you try to build on linux? env_includes should be set if IS_MACOSX
IS_LINUX or IS_SUN is set in bld.env. I suspect that neither of these is
set and this is resulting in env_includes use throwing the
UnboundLocalError exception.

-- 
Nedko Arnaudov &lt;GnuPG KeyID: 5D1B58ED&gt;
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1363811042.22025_0.ltw:2,a/index.html'>Prev</a></td><td><a href='../1363854085.4521_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1363830017.6503_0.ltw:2,'>Index</a></td></tr>
</table>
<p><small>1363830017.6503_0.ltw:2,&nbsp;&lt;87wqt14jkj.fsf at arnaudov dot name&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
