<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [Jack-Devel] Jack2 waf build error</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [Jack-Devel] Jack2 waf build error</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1363830017.6503_0.ltw:2,/index.html'>Prev</a></td><td><a href='../1363864663.12109_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1363854085.4521_0.ltw:2,a'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Thu, 21 Mar 2013 12:21:12 +0400 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> 4ernov </span> &lt;[hidden] at gmail dot com&gt; </td></tr>
<tr><td class='col1'>To</td><td>Nedko Arnaudov &lt;[hidden] at arnaudov dot name&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>[hidden] at lists dot jackaudio dot org </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>Nedko Arnaudov
<a href='../1363830017.6503_0.ltw:2,/index.html'>Re: [Jack-Devel] Jack2 waf build error </a></td></tr>
</table>
<pre>
Yes, I'm building on Linux, but somehow IS_LINUX fails. I didn't try
John's suggestion to build with Python 3 yet, but hope it would help.

2013/3/21 Nedko Arnaudov &lt;[hidden]&gt;:
&gt; Alexey Chernov &lt;[hidden]&gt; writes:
&gt;
&gt;&gt; Hello,
&gt;&gt; I decided to update my Jack2 version and faced a strange error when building
&gt;&gt; version 1.9.9.5 (also there with latest git master):
&gt;&gt;
&gt;&gt; ./waf build
&gt;&gt; Waf: Entering directory `/usr/src/packages/jack/jack2/build'
&gt;&gt; make[1]: Entering directory `/usr/src/packages/jack/jack2/build'
&gt;&gt; Traceback (most recent call last):
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py",
&gt;&gt; line 97, in waf_entry_point
&gt;&gt;     run_commands()
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py",
&gt;&gt; line 151, in run_commands
&gt;&gt;     run_command(cmd_name)
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py",
&gt;&gt; line 143, in run_command
&gt;&gt;     ctx.execute()
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Scripting.py",
&gt;&gt; line 345, in execute
&gt;&gt;     return execute_method(self)
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Build.py",
&gt;&gt; line 98, in execute
&gt;&gt;     self.execute_build()
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Build.py",
&gt;&gt; line 101, in execute_build
&gt;&gt;     self.recurse([self.run_dir])
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Context.py",
&gt;&gt; line 128, in recurse
&gt;&gt;     user_function(self)
&gt;&gt;   File "/usr/src/packages/jack/jack2/wscript", line 337, in build
&gt;&gt;     bld.add_subdirs('common')
&gt;&gt;   File
&gt;&gt; "/usr/src/packages/jack/jack2/.waf-1.6.11-30618c54883417962c38f5d395f83584/waflib/Context.py",
&gt;&gt; line 128, in recurse
&gt;&gt;     user_function(self)
&gt;&gt;   File "/usr/src/packages/jack/jack2/common/wscript", line 277, in build
&gt;&gt;     create_jack_process_obj(bld, 'netmanager', 'JackNetManager.cpp',
&gt;&gt; serverlib)
&gt;&gt;   File "/usr/src/packages/jack/jack2/common/wscript", line 27, in
&gt;&gt; create_jack_process_obj
&gt;&gt;     process.includes = ['.'] + env_includes + ['jack', '..']
&gt;&gt; UnboundLocalError: local variable 'env_includes' referenced before assignment
&gt;&gt;
&gt;&gt; Here's my configure command and its output:
&gt;&gt; ./waf configure --prefix=/usr --firewire --alsa --debug
&gt;&gt; Setting top to                           : /usr/src/packages/jack/jack2
&gt;&gt; Setting out to                           : /usr/src/packages/jack/jack2/build
&gt;&gt; Checking for 'g++' (c++ compiler)        : /usr/bin/g++
&gt;&gt; Checking for 'gcc' (c compiler)          : /usr/bin/gcc
&gt;&gt; Checking for header samplerate.h         : yes
&gt;&gt; Checking for header samplerate.h         : yes
&gt;&gt; Checking for header sndfile.h            : yes
&gt;&gt; Checking for program pkg-config          : /usr/bin/pkg-config
&gt;&gt; Checking for 'celt' &gt;= 0.5.0             : yes
&gt;&gt; Checking for library readline            : yes
&gt;&gt; Checking for 'celt' &gt;= 0.11.0            : yes
&gt;&gt; Checking for 'opus' &gt;= 0.9.0             : not found
&gt;&gt;
&gt;&gt; ==================
&gt;&gt; JACK 1.9.10 svn revision will checked and eventually updated during build
&gt;&gt; Build with a maximum of 64 JACK clients
&gt;&gt; Build with a maximum of 768 ports per application
&gt;&gt; Install prefix                           :  /usr
&gt;&gt; Library directory                        :  /usr/lib
&gt;&gt; Drivers directory                        :  /usr/lib/jack
&gt;&gt; Build debuggable binaries                :  yes
&gt;&gt; C compiler flags                         :  ['-O3', '-march=core2', '-mssse3',
&gt;&gt; '-Wall', '-g']
&gt;&gt; C++ compiler flags                       :  ['-O3', '-march=core2', '-mssse3',
&gt;&gt; '-Wall', '-g']
&gt;&gt; Linker flags                             :  ['-g']
&gt;&gt; Build doxygen documentation              :  no
&gt;&gt; Build Opus netjack2                      :  no
&gt;&gt; Build with engine profiling              :  no
&gt;&gt; Build with 32/64 bits mixed mode         :  no
&gt;&gt; Build standard JACK (jackd)              :  yes
&gt;&gt; Build D-Bus JACK (jackdbus)              :  no
&gt;&gt; Autostart method                         :  classic
&gt;&gt;
&gt;&gt; Python version is 2.7.2. Could you please help me with the issue?
&gt;
&gt; Do you try to build on linux? env_includes should be set if IS_MACOSX
&gt; IS_LINUX or IS_SUN is set in bld.env. I suspect that neither of these is
&gt; set and this is resulting in env_includes use throwing the
&gt; UnboundLocalError exception.
&gt;
&gt; --
&gt; Nedko Arnaudov &lt;GnuPG KeyID: 5D1B58ED&gt;
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1363830017.6503_0.ltw:2,/index.html'>Prev</a></td><td><a href='../1363864663.12109_0.ltw:2,a/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1363854085.4521_0.ltw:2,a'>Index</a></td></tr>
</table>
<p><small>1363854085.4521_0.ltw:2,a&nbsp;&lt;CAL8gro3mMc84vOqsAhetCUMMAo0Nw689HE6ENFPDO5AHOdqMjw at mail dot gmail dot com&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
