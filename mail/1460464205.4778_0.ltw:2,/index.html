<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Re: [Jack-Devel] alsa_in/out increasing time between record and play on second card</title>
<style>
pre {background: #fafafa; border: 1px solid #f1f2f3; font-size: 1.2em; padding: 10px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;}
h1 {font-size: 140%;}
.header_table {table-layout: fixed; width: 100%;}
.col1 {width: 120px; vertical-align: top;}
.from {font-weight: bold;}
</style>
</head>
<body>
<h1>Re: [Jack-Devel] alsa_in/out increasing time between record and play on second card</h1>
<table class="header_table">
<tr><td class='col1'><a href='../1460463319.2031_0.ltw:2,/index.html'>Prev</a></td><td><a href='../1460530900.22740_0.ltw:2,/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1460464205.4778_0.ltw:2,'>Index</a></td></tr>
<tr><td class='col1'>Date</td><td>Tue, 12 Apr 2016 14:29:51 +0200 </td></tr>
<tr><td class='col1'>From</td><td><span class="from"> mdrslmr </span> &lt;[hidden] at online dot de&gt; </td></tr>
<tr><td class='col1'>To</td><td>J&#xF6;rn Nettingsmeier &lt;[hidden] at stackingdwarves dot net&gt; </td></tr>
<tr><td class='col1'>Cc</td><td>[hidden] at lists dot jackaudio dot org </td></tr>
<tr><td class='col1'>In-Reply-To</td><td>J&#xF6;rn Nettingsmeier
<a href='../1460463319.2031_0.ltw:2,/index.html'>Re: [Jack-Devel] alsa_in/out increasing time between record and play on second card </a></td></tr>
</table>
<pre>
Hi,

thanks for the quick and sound response.

On Tue, 12 Apr 2016, J&#xF6;rn Nettingsmeier wrote:

&gt; On 04/12/2016 10:42 AM, mdrslmr wrote:

&gt;
&gt;&gt;  We use a script starting:
&gt;&gt;
&gt;&gt;  aplay -q -D $channel Test-Ton.wav &amp;
&gt;&gt;  arecord -q -D $channel -f S16_LE -r 48000 -c 1 -d 8 $result/recorded.wav
&gt;
&gt; Why are you using alsa tools when you are otherwise working with JACK? This 
&gt; will make the problem analysis more complicated...
Just because I'm, familiar with it. I'm not sure what to replace it
with, jack.play, jack.record?
&gt;
&gt;&gt;  The resulting wav file shows that the time between the start of the
&gt;&gt;  recording
&gt;&gt;  and the start of the actual sound continuously increases.
&gt;&gt;  In the beginning (after starting the system up) the time difference is
&gt;&gt;  just about 3ms. It increases
&gt;&gt;  constantly to almost one second now
&gt;&gt;  after 8 weeks of uptime.
&gt;
&gt; If audioadapter works by just providing a big buffer (without any 
&gt; resampling), the reason would be clock drift. Such a minuscule clock drift 
&gt; between two consumer cards however would be sensationally good.

Yes I think it's just clocks drift.

I did jack_unload/jack_load and got the channels back (almost) in synch.

&gt;
&gt; First of all, consider if you can actually sync the cards. If both have an 
&gt; SPDIF i/o, you can use that. Just connect the secondary card's SPDIF in to 
&gt; the master's SPDIF out (no matter whether you use toslink or RCA), and you 
&gt; can be sure your cards will be locked.

Our cards M-Audio Delta44 don't have SPDIF ports.

&gt;
&gt; Secondly, try zita-ajbridge. If you can sync the cards in hardware, there is 
&gt; an option for zita-ajbridge to skip the resampling, which will conserve cpu 
&gt; power.

I'll check it out.

Cheers,
Michael
</pre>
<table class="header_table">
<tr><td class='col1'><a href='../1460463319.2031_0.ltw:2,/index.html'>Prev</a></td><td><a href='../1460530900.22740_0.ltw:2,/index.html'>Next</a>&nbsp;&nbsp;<a href='../../index.html#1460464205.4778_0.ltw:2,'>Index</a></td></tr>
</table>
<p><small>1460464205.4778_0.ltw:2,&nbsp;&lt;alpine.LNX.2.20.1604121420330.8229 at mpslxdressel dot desy dot de&gt;</small></p>
<!-- Created with Bash Archive Mail -->
</body>
</html>
